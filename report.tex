\documentclass{article}
\usepackage{graphicx}
%\usepackage[comma, authoryear]{natbib}
\begin{document}
\begin{titlepage}
\vspace*{\stretch{1.0}}
\begin{center}
    \Large\textbf{Routing using Quagga: An example with OSPF`}\\
    A technical report\\
    \textit{by}\\
    \large\textit{Abhishek Balaji \\ Adithya K}
\end{center}
\vspace{2cm}
\begin{figure}[ht!]
  \centering
  \includegraphics[width=40mm]{Quagga.jpg}
\end{figure}

\vspace*{\stretch{2.0}}
\end{titlepage}
\tableofcontents
\clearpage
\section{Introduction}
\pagenumbering{arabic}
\begin{figure}[ht!]
  \centering
  \includegraphics[width=10cm]{BasicRouter.jpg}
  \caption{Basic representation of a Routing stack}
  \label{fig:basicrouter}
\end{figure}
Network Routing refers to the action of an electronic network in transferring data 
from one part of the network to another in an efficient and an optimized way. 
The Network typically consists of a bunch of forwarding elements (Hardware) which 
perform the actual transmission, receiving of data and a software sitting on top of them, 
which co-ordinate and take decisions on which next hardware element the piece of data 
should be given to. Figure~ \ref{fig:basicrouter} presents a basic structure 
of a single routing element.\\
\textbf{Quagga} is one such software, a Network Routing Software. It runs on \textit{Unix}-like systems 
(GNU/Linux, Solaris, FreeBSD, NetBSD). Quagga is a Software Suite, having implementations 
of the famous routing protocols of the Internet viz. \textbf{Routing Information Protocol (RIP), 
Open Shortest Path First (OSPF), Border Gateway Protocol (BGP)} and also support for 
BABEL, OLSR (Wireless Mesh Routing Protocols). Quagga is a open-source-licenced (GPLv2) stack.\\
Quagga had its origins in the Zebra project. Quagga was forked off Zebra in order to provide a
more community based approach to it. Zebra currently in the form of ZebOS is currently being
deployed by a company IP Infusion. \cite{zebraipinfusion}. Quagga is currently being maintained
by NetDEF \cite{netdef} as a OpenSourceRouting project.

\subsection{Architecture}
The Quagga architecture consists of a core daemon, \textit{zebra}, which acts as an abstraction 
layer to the underlying Unix kernel and presents the \textbf{Zserv API} over a Unix or TCP stream 
to Quagga clients. It is these Zserv clients which typically implement a routing protocol 
and communicate routing updates to the zebra daemon.\cite{quaggaofficial} \\
\begin{figure}[ht!]
  \centering
  \includegraphics[width=10cm]{QuaggaArchitecture.jpg}
  \caption{Architecture of Quagga Software Stack}
  \label{fig:quaggaarchitecture}
\end{figure}
Referring Figure~ \ref{fig:quaggaarchitecture}, we can see that Zebra is an IP routing manager. 
It provides kernel routing table updates, interface lookups, and redistribution of routes between 
different routing protocols. Zebra acts as a dedicated server. It exchanges routing information with 
other routers using routing protocols and updates the kernelâ€™s routing table based on the information exchanged.
Zebra daemon is the core of quagga that manage the interaction of kernel routing table and the daemons for 
individual routing protocols. Each daemon has its own config file in /etc/quagga directory and their own 
virtual terminal interface or vty. As mentioned before, the individual routing protocol daemons communicate 
with the Zebra daemon over a TCP stream. A custom routing protocol may also be written to interface with the
Zebra daemon using the ZServ API \cite{zservdocs}.

\subsection{Usecases and Alternatives}
As mentioned by a chief maintainer of the Quagga software here \cite{martininterview}, Quagga's
primary use-case is for anybody who needs an open-source implementation of the routing protocols
as a base for trying out new one. Quagga is used both in data centers and in the academic community. 
Quagga also is seen as a software which is very useful and widely used, but rarely acknowledged by the corporate community.\\
The main alternative for the Quagga routing software is the BIRD Internet Routing Daemon \cite{bird}.
Developed from scratch as an academic project mainly for BGP route-reflector for Internet exchange points, 
it is actively maintained and supported till date supporting multiple protocols including OSPF.

\clearpage
%\section{OSPF}
%Do we need this???
%\clearpage
\section{Testbed Description}
Our goal is to display the working of a routing protocol using the Quagga software stack.
We have chosen Open-Shortest-Path-First protocol as it is the most common routing protocol used
within a particular Autonomous System. We propose to show how the routing tables are built, 
how link-state information is utilized and how an alternate path is established in case of a link failure.\\
We use, two physical machines each running 12.04 Ubuntu LTS, with Intel x86-64 bit architectures with
32 GB of RAM. We run in each of these, two virtual machines which are directly connected to the host machine,
and also via an internal network between them.\\
\begin{figure}[ht!]
  \centering
  \includegraphics[width=10cm]{QuaggaTopo.jpg}
  \caption{Network Topology chosen for the experiments}
  \label{fig:networktopo}
\end{figure}
Figure~\ref{fig:networktopo} presents the network topology that we discussed. Each node whether a virtual or a physical
entity has Quagga running on it and functions as a router. For practical reasons, we did nott add individual nodes
but used our Router nodes for running basic connectivity and path measurements. We perform two experiments, and
further capture the connectivity and path measurements using the \textit{ping} and \textit{traceroute} commands 
available on standard Ubuntu distributions.
\subsection{Quagga Setup}
\label{sec:quaggasetup}
This section describes the configuration changes that were made to implement OSPF using Quagga.
\footnote{We assume you have installed Quagga at this point. If you have not, look up \cite{quaggaubuntuinstall} \cite{quaggainstall} before proceeding.}
\begin{enumerate}
  \item Edit the `daemons' file to specify that you will be needing Zebra and Ospf daemons running. \footnote{Zebra is default daemon that should always be run
    irrespective of what routing software you employ}
  \item Edit the `zebra.conf' file, to specify about your network configuration.
  \item Edit the `ospfd.conf' file, to specify the configurations related to OSPF, the area configuration and the IP addresses of the individual networks.
  \item Start Quagga in the CLI by typing in \# `/etc/init.d/quagga start' 
    \footnote{In case Quagga is already running, you need to type restart, to stop the running daemon before starting it again}
    \footnote{This case assumes you have the OS setup as Ubuntu, in case of a different flavor of Linux, kindly consult the user-doc on how to run applications}
\end{enumerate}
%\subsection{Experiment 1}
%In the first experiment, we simply start the Quagga routing software with a OSPF daemon on each of the nodes
%and verify the routing table generated.
%\subsection{Experiment 2}
%Tear down a link and display how packets are re-routed along with the new routing table
\clearpage
\section{Performance Measurement Results}
We conduct two experiments, capture the connectivity and path metrics and also show the routing table generated.
The first experiment presents a stable state, after simply starting the Quagga routing software suite on all the routers as described in
Fig \ref{fig:networktopo} (See Section \ref{sec:quaggasetup} to see the setup)
We show the routing table generated, the ping and traceroute results from two distinct nodes in the network.
In Experiment 2, we remove the link between two nodes which is used in the routing table, and show how the network re-routes traffic 
after routing protocol adds an alternate path.
\subsection{Experiment 1}
\subsection{Experiement 2}
\clearpage
\section{Conclusions and Suggestions}
Quagga Routing software is able to demonstrate and prove that a simple machine running Linux can definitely
be used as a custom-enterprise grade router. Also, after evolving from the Zebra software, it provides an
easy mechanism for any new protocol to be built on top of it. Sadly, it could never really continue and
be a market changer, because, Network component manufacturers (viz. Cisco, Juniper) built their own software
stacks for tighter integration with their hardware systems. But today, Networking in general has evolved, and
market is moving in the direction of dividing the routing software (control plane) with the forwarding
component (Data plane). Quagga has adjusted to this and provides support for this. What remains to be seen
is whether the new players entering the market are willing to adopt a proven open, enterprise-grade 
alternative to a purely proprietary version.
%\bibliographystyle{plain}
%\bibliography{abbr_long, ref_links}
\begin{thebibliography}{9}
  \bibitem{quaggaofficial}The official website of the quagga software provided by the GNU foundation http://www.nongnu.org/quagga/
  \bibitem{zebraipinfusion}GNU Zebra project implemented as ZebOS at IP Infusion http://en.wikipedia.org/wiki/GNU\textunderscore Zebra
  \bibitem{netdef} Network Device Education Foundation, Non-profit company http://www.netdef.org/
  \bibitem{martininterview} Quagga: A Success, and Yet a Failure, of Open-Source In Networking? Interview with Martin Winter,NetDEF https://www.sdncentral.com/education/quagga-project-martin-winter-interview/2014/02/
  \bibitem{bird} BIRD Internet Routing Daemon http://bird.network.cz/
  \bibitem{quaggaubuntuinstall} Installing Quagga in Ubuntu https://wiki.ubuntu.com/JonathanFerguson/Quagga
  \bibitem{quaggainstall} Official guide to build and install Quagga http://www.nongnu.org/quagga/docs/docs-info.html\#Installation
  \bibitem{zservdocs} Zebra protocol, packet format and ZServ APIs http://www.nongnu.org/quagga/docs/docs-info.html\#Zebra-Protocol
\end{thebibliography}
\end{document}
